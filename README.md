# Handy Automator

A home automation system that you control with your hands.

## Dependencies

[Golang](https://go.dev)

[Python](https://www.python.org/)

Make - Comes pre-installed on MacOS. On windows you can install it with
[scoop.sh](https://scoop.sh/) or manually from
[this](https://gnuwin32.sourceforge.net/packages/make.htm) website.

[Docker](https://www.docker.com/)

[Arduino IDE](https://www.arduino.cc/en/software/) - Only for edge device code

## Dev environment setup

1. Clone the repo:

```
$ git clone https://github.com/caiocotts/handy-automator
```

2. Run the setup script:

```
$ python setup.py
```

3. Finally, create a `.env` file at the root of the project, filling all the
   varaibles specified in `.env.example`:

```sh
DB_PASSWORD=<the-password-to-the-database>
DB_URL=postgres://postgres:<the-password-to-the-database>@localhost:5432/postgres

GOOSE_DBSTRING=postgres://postgres:<the-password-to-the-database>@localhost:5432/postgres
```

Use the `Makefile` generated by the setup script to run tasks such as: running the system in development mode, managing the
DB, and also generating the API code. Available Make commands can be viewed by
running `make help`:

```
$ make help
Usage: make [TARGET]

Database:
  start-db            Instantiate a database container
  stop-db             Stop the database container
  destroy-db          Stop the database container and erase all its data
  mup                 Apply all migrations
  mdown               Undo the last migration
  migration           Create a new migration SQL file in db/migrations

Development:
  dev                 Start handy-automator in development mode
  gen-api             Generate API code from the OpenAPI spec

Miscellaneous:
  check-db-status     Check if the database is ready to accept connections (internal)
  help                Show this help message
```
